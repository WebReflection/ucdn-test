import{isArray as e,slice as t}from"../../uarray/esm/index.js";import r from"../../udomdiff/esm/index.js";import{aria as o,attribute as n,data as a,event as i,ref as c,setter as s,text as d}from"../../uhandlers/esm/index.js";import{diffable as f}from"../../uwire/esm/index.js";import{reducePath as m}from"./node.js";const l=(e,t,o)=>r(e.parentNode,t,o,f,e);export function handlers(r){const{type:f,path:p}=r,u=p.reduceRight(m,this);return"node"===f?(r=>{let o,n,a=[];const i=c=>{switch(typeof c){case"string":case"number":case"boolean":o!==c&&(o=c,n?n.textContent=c:n=document.createTextNode(c),a=l(r,a,[n]));break;case"object":case"undefined":if(null==c){o!=c&&(o=c,a=l(r,a,[]));break}if(e(c)){o=c,0===c.length?a=l(r,a,[]):"object"==typeof c[0]?a=l(r,a,c):i(String(c));break}"ELEMENT_NODE"in c&&o!==c&&(o=c,a=l(r,a,11===c.nodeType?t.call(c.childNodes):[c]))}};return i})(u):"attr"===f?((e,t)=>"ref"===t?c(e):"aria"===t?o(e):"data"===t?a(e):"."===t.slice(0,1)?s(e,t.slice(1)):"on"===t.slice(0,2)?i(e,t):n(e,t))(u,r.name):d(u)}